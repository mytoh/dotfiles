
# variables
blue="[38;5;004m"
normal_color="[38;5;8m"
green="[38;5;6m"
reset_color="[0m"

# prompt
function precmd {
  local e=$?

  (( e )) && print -n "$e|"
}


function current_directory {
	local d=${PWD:-?} p=~; [[ $p = ?(*/) ]] || \
	d=${d/#$p/~}; local m=${%d} n p=...; (( m > 0 )) || m=${#d}
	(( m > (n = (COLUMNS/3 < 7 ? 7 : COLUMNS/3)) )) && d=${d:(-n)} || \
	p=; print -nr -- "$p$d"
}

function set-prompt {
printf "%s%s%s\n%s"       \
  "${blue}${precmd}" "${normal_color}â”Œâ”€$reset_color" "${normal_color}(${blue}$(current_directory)${normal_color})"  \
       "${normal_color}â””â”ˆâ•¸${reset_color} "
    

}
PS1='$(set-prompt)'


# path setting {{{
for p in ~/local/bin; do
  [[ -d $p/. ]] || continue
  [[ :$PATH: = *:$p:* ]] || PATH=$p:$PATH
done
#}}}

export SHELL=$MKSH MANWIDTH=80 LESSHISTFILE=-
HISTFILE=~/.mksh_history
HISTSIZE=999999


# functions {{{

# give MidnightBSD's laffer1 a bit of csh feeling
function setenv {
	eval export $1'="$2"'
}

function color-numbers {
  for i in $(seq 000 16 255)
  do
    for j in $(seq ${i} $((i + 15)))
    do
      echo -en "[38;5;${j}m $j [0m"
    done
    echo
  done
}
#}}}

# key bindings
bind '^P'=search-history-up







unset p
